{"remainingRequest":"/Users/zkk/code/program/admin-system/node_modules/babel-loader/lib/index.js!/Users/zkk/code/program/admin-system/node_modules/eslint-loader/index.js??ref--13-0!/Users/zkk/code/program/admin-system/src/utils/request.js","dependencies":[{"path":"/Users/zkk/code/program/admin-system/src/utils/request.js","mtime":1595230402314},{"path":"/Users/zkk/code/program/admin-system/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zkk/code/program/admin-system/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/zkk/code/program/admin-system/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7Cgp2YXIgX3RoaXMgPSB0aGlzOwoKaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJzsKaW1wb3J0IGNvbmZpZyBmcm9tICIuLi8uLi9jb25maWciOwppbXBvcnQgeyBNZXNzYWdlIH0gZnJvbSAnZWxlbWVudC11aSc7IC8vIGltcG9ydCBzdG9yZSBmcm9tICcuLi9zdG9yZSc7CgppbXBvcnQgcm91dGVyIGZyb20gIi4uL3JvdXRlciI7IC8vIHVybCA9IGJhc2UgdXJsICsgcmVxdWVzdCB1cmwKCnZhciBzZXJ2ZXIgPSBheGlvcy5jcmVhdGUoewogIGJhc2VVUkw6IHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAicHJvZHVjdGlvbiIgPyBjb25maWcuYnVpbGQuQkFTRV9VUkwgOiBjb25maWcuZGV2LkJBU0VfVVJMLAogIHRpbWVvdXQ6IDUwMDAsCiAgLy8gcmVxdWVzdCB0aW1lb3V0CiAgaGVhZGVyczogewogICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9VVRGLTgnCiAgfQp9KTsKc2VydmVyLmludGVyY2VwdG9ycy5yZXF1ZXN0LnVzZShmdW5jdGlvbiAoY29uZmlnKSB7CiAgY29uc29sZS5sb2coY29uZmlnKTsgLy8gaWYoc3RvcmUuc3RhdGUudXNlci50b2tlbil7CiAgLy8gICAgIGNvbmZpZy5oZWFkZXJzWydYLVRva2VuJ109c3RvcmUuc3RhdGUudXNlci50b2tlbjsKICAvLyB9CgogIHJldHVybiBjb25maWc7Cn0sIGZ1bmN0aW9uIChlcnJvcikgewogIGNvbnNvbGUubG9nKGVycm9yKTsKICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IpOwp9KTsKc2VydmVyLmludGVyY2VwdG9ycy5yZXNwb25zZS51c2UoZnVuY3Rpb24gKHJlcykgewogIGlmIChyZXMuZGF0YS5tc2cgIT0gdW5kZWZpbmVkKSB7CiAgICBpZiAocmVzLmRhdGEuY29kZSA9PSAyMDAgfHwgcmVzLmRhdGEuY29kZSA9PSAxKSB7CiAgICAgIE1lc3NhZ2Uuc3VjY2VzcyhyZXMuZGF0YS5tc2cpOwogICAgfSBlbHNlIHsKICAgICAgTWVzc2FnZS5lcnJvcihyZXMuZGF0YS5tc2cpOwogICAgfQogIH0KCiAgaWYgKHJlcy5kYXRhLm1zZyA9PT0gJ3Rva2Vu5bey5aSx5pWI77yM6K+36YeN5paw55m75b2VJykgewogICAgX3RoaXMuJHJvdXRlci5wdXNoKCcvaG9tZScpOwogIH0gLy90b2tlbuWkseaViOWkhOeQhgoKCiAgcmV0dXJuIHJlczsKfSwgZnVuY3Rpb24gKGVycm9yKSB7CiAgLy9pZiAoZXJyb3IucmVzcG9uc2UpewogIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1kZWJ1Z2dlcgogIC8vYWpheOivt+axguagueacrOWwseayoeacieWPkeWHuu+8jOaJgOS7pXN0YXR1c+S4ujAKICBzd2l0Y2ggKGVycm9yLnJlcXVlc3Quc3RhdHVzKSB7CiAgICBjYXNlIDQwMDoKICAgICAgZXJyb3IubWVzc2FnZSA9ICfor7fmsYLplJnor68oNDAwKSc7CiAgICAgIGJyZWFrOwoKICAgIGNhc2UgNDAxOgogICAgICB7CiAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ0F1dGhvcml6YXRpb24nKTsKCiAgICAgICAgX3RoaXMuJHJvdXRlci5wdXNoKCcvbG9naW4nKTsKCiAgICAgICAgZXJyb3IubWVzc2FnZSA9ICfmnKrmjojmnYPvvIzor7fph43mlrDnmbvlvZUoNDAxKSc7CiAgICAgICAgYnJlYWs7CiAgICAgIH0KCiAgICBjYXNlIDQwMzoKICAgICAgZXJyb3IubWVzc2FnZSA9ICfmi5Lnu53orr/pl64oNDAzKSc7CiAgICAgIGJyZWFrOwoKICAgIGNhc2UgNDA0OgogICAgICBlcnJvci5tZXNzYWdlID0gJ+ivt+axguWHuumUmSg0MDQpJzsKICAgICAgYnJlYWs7CgogICAgY2FzZSA0MDg6CiAgICAgIGVycm9yLm1lc3NhZ2UgPSAn6K+35rGC6LaF5pe2KDQwOCknOwogICAgICBicmVhazsKCiAgICBjYXNlIDUwMDoKICAgICAgZXJyb3IubWVzc2FnZSA9ICfmnI3liqHlmajplJnor68oNTAwKSc7CiAgICAgIGJyZWFrOwoKICAgIGNhc2UgNTAxOgogICAgICBlcnJvci5tZXNzYWdlID0gJ+acjeWKoeacquWunueOsCg1MDEpJzsKICAgICAgYnJlYWs7CgogICAgY2FzZSA1MDI6CiAgICAgIGVycm9yLm1lc3NhZ2UgPSAn572R57uc6ZSZ6K+vKDUwMiknOwogICAgICBicmVhazsKCiAgICBjYXNlIDUwMzoKICAgICAgZXJyb3IubWVzc2FnZSA9ICfmnI3liqHkuI3lj6/nlKgoNTAzKSc7CiAgICAgIGJyZWFrOwoKICAgIGNhc2UgNTA0OgogICAgICBlcnJvci5tZXNzYWdlID0gJ+e9kee7nOi2heaXtig1MDQpJzsKICAgICAgYnJlYWs7CgogICAgY2FzZSA1MDU6CiAgICAgIGVycm9yLm1lc3NhZ2UgPSAnSFRUUOeJiOacrOS4jeWPl+aUr+aMgSg1MDUpJzsKICAgICAgYnJlYWs7CgogICAgZGVmYXVsdDoKICAgICAgZXJyb3IubWVzc2FnZSA9ICJcdThGREVcdTYzQTVcdTUxRkFcdTk1MTkoIi5jb25jYXQoZXJyb3IucmVxdWVzdC5zdGF0dXMsICIpISIpOwogIH0KCiAgTWVzc2FnZSh7CiAgICB0eXBlOiAnZXJyb3InLAogICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZQogIH0pOyAvL30KCiAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yLnJlc3BvbnNlKTsKfSk7CmV4cG9ydCBkZWZhdWx0IHNlcnZlcjs="},{"version":3,"sources":["/Users/zkk/code/program/admin-system/src/utils/request.js"],"names":["axios","config","Message","router","server","create","baseURL","process","env","NODE_ENV","build","BASE_URL","dev","timeout","headers","interceptors","request","use","console","log","error","Promise","reject","response","res","data","msg","undefined","code","success","$router","push","status","message","localStorage","removeItem","type"],"mappings":"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","sourcesContent":["import axios from 'axios';\nimport config from '../../config';\nimport {Message} from 'element-ui';\n// import store from '../store';\nimport router from '../router';\n// url = base url + request url\nconst server=axios.create({\n    baseURL:process.env.NODE_ENV===\"production\"? config.build.BASE_URL:config.dev.BASE_URL,\n    timeout: 5000, // request timeout\n    headers: {'Content-Type':'application/json;charset=UTF-8'}\n})\nserver.interceptors.request.use(config=>{\n    console.log(config)\n    // if(store.state.user.token){\n    //     config.headers['X-Token']=store.state.user.token;\n    // }\n    return config;\n},error=>{\n    console.log(error);\n    return Promise.reject(error);\n})\nserver.interceptors.response.use(res => {\n        if (res.data.msg!=undefined) {\n            if (res.data.code == 200 ||res.data.code==1) {\n                Message.success(res.data.msg);\n            } else {\n                Message.error(res.data.msg);\n            }\n        }\n        if (res.data.msg==='token已失效，请重新登录'){\n            this.$router.push('/home');\n        }\n        //token失效处理\n        return res;\n    },error => {\n        //if (error.response){\n        // eslint-disable-next-line no-debugger\n        //ajax请求根本就没有发出，所以status为0\n        switch (error.request.status) {\n            case 400:\n                error.message = '请求错误(400)';\n                break;\n            case 401: {\n                localStorage.removeItem('Authorization');\n                this.$router.push('/login');\n                error.message = '未授权，请重新登录(401)';\n                break;\n            }\n            case 403:\n                error.message = '拒绝访问(403)';\n                break;\n            case 404:\n                error.message = '请求出错(404)';\n                break;\n            case 408:\n                error.message = '请求超时(408)';\n                break;\n            case 500:\n                error.message = '服务器错误(500)';\n                break;\n            case 501:\n                error.message = '服务未实现(501)';\n                break;\n            case 502:\n                error.message = '网络错误(502)';\n                break;\n            case 503:\n                error.message = '服务不可用(503)';\n                break;\n            case 504:\n                error.message = '网络超时(504)';\n                break;\n            case 505:\n                error.message = 'HTTP版本不受支持(505)';\n                break;\n            default:\n                error.message = `连接出错(${error.request.status})!`;\n        }\n        Message({\n            type: 'error',\n            message: error.message\n        });\n        //}\n        return Promise.reject(error.response)\n    }\n);\n\nexport default server;\n"]}]}