{"remainingRequest":"/Users/zkk/code/program/admin-system/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/zkk/code/program/admin-system/src/views/device/deviceInfo/deviceInfo.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/zkk/code/program/admin-system/src/views/device/deviceInfo/deviceInfo.vue","mtime":1593950873049},{"path":"/Users/zkk/code/program/admin-system/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zkk/code/program/admin-system/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/zkk/code/program/admin-system/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zkk/code/program/admin-system/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCi8vIGltcG9ydCBnZXRFcXVpcG1lbnRJbmZvcm1hdGlvbiBmcm9tICJAL21vY2svZ2V0RXF1aXBtZW50SW5mb3JtYXRpb24iOyAvL21vY2vmlbDmja4KaW1wb3J0IFVwbG9hZEV4Y2VsIGZyb20gIi4uLy4uLy4uL2NvbXBvbmVudHMvdXBsb2FkRXhjZWwvdXBsb2FkRXhjZWwiOwppbXBvcnQge2dldERldmljZUluZm8sIGRlbGV0ZURldmljZSwgYWRkRXF1aXBtZW50LCBlZGl0RXF1aXBtZW50LCB1cGxvYWRFeGNlbH0gZnJvbSAiLi4vLi4vLi4vYXBpL2RldmljZSI7CmltcG9ydCBFeHBvcnRUYWJsZSBmcm9tICIuLi8uLi8uLi9jb21wb25lbnRzL2V4cG9ydFRhYmxlL2V4cG9ydFRhYmxlIjsKCmV4cG9ydCBkZWZhdWx0IHsKICAgIG5hbWU6ICJkZXZpY2UiLAogICAgY29tcG9uZW50czoge1VwbG9hZEV4Y2VsfSwKICAgIGRhdGEoKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgdGFibGU6IFtdLAogICAgICAgICAgICB0YWJsZUhlYWQ6WwogICAgICAgICAgICAgICAge2luZGV4OiAwLGxhYmVsOifmqKHlnZfor4bliKvnoIEnLHByb3A6J21vZHVsZUlkJ30sCiAgICAgICAgICAgICAgICB7aW5kZXg6IDEsbGFiZWw6J+iuvuWkh+e8luWPtycscHJvcDonZXFwSWQnfSwKICAgICAgICAgICAgICAgIHtpbmRleDogMixsYWJlbDon6K6+5aSH57G75Z6LJyxwcm9wOidlcXBUeXBlSWQnfSwKICAgICAgICAgICAgICAgIHtpbmRleDogNCxsYWJlbDon5b2T5YmN54q25oCBJyxwcm9wOidub3dTdGF0dXMnfSwKICAgICAgICAgICAgICAgIHtpbmRleDogNSxsYWJlbDon5b2T5YmN5oKj6ICFJyxwcm9wOidwYXRpZW50TmFtZSd9LAogICAgICAgICAgICAgICAge2luZGV4OiA2LGxhYmVsOifotJ/otKPljLvluIgnLHByb3A6J2RvY3Rvck5hbWUnfSwKICAgICAgICAgICAgICAgIHtpbmRleDogNyxsYWJlbDon5omA5bGe5Yy76ZmiJyxwcm9wOidob3NwaXRhbElkJ30sCiAgICAgICAgICAgIF0sCiAgICAgICAgICAgIGN1cnJlbnRQYWdlOiAxLAogICAgICAgICAgICB0b3RhbE51bWJlcjogMCwKICAgICAgICAgICAgZGlhbG9nRm9ybVZpc2libGU6IGZhbHNlLAogICAgICAgICAgICBkYXRhRm9ybToge30sCiAgICAgICAgICAgIHJ1bGVzOiB7fSwKICAgICAgICAgICAgaXNFZGl0OiBmYWxzZSwKICAgICAgICB9CiAgICB9LAogICAgbWV0aG9kczogewogICAgICAgIGhhbmRsZUN1cnJlbnRDaGFuZ2UocGFnZSkgey8v5pON5L2c6aG156CB5pS55Y+YCiAgICAgICAgICAgIHRoaXMuaHR0cEdldFRhYmxlRGF0YShwYWdlKTsKICAgICAgICAgICAgdGhpcy5jdXJyZW50UGFnZSA9IHBhZ2U7CiAgICAgICAgfSwKICAgICAgICBodHRwR2V0VGFibGVEYXRhKHBhZ2UpIHsvL+aLieWPluW9k+WJjemhteiuvuWkh+aVsOaNru+8iOacieivt+axgu+8iQogICAgICAgICAgICBnZXREZXZpY2VJbmZvKHBhZ2UpLnRoZW4ocmVzID0+IHsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlcy5kYXRhKQogICAgICAgICAgICAgICAgdGhpcy50YWJsZSA9IHJlcy5kYXRhLmxpc3Q7CiAgICAgICAgICAgICAgICB0aGlzLnRvdGFsTnVtYmVyID0gcmVzLmRhdGEudG90YWw7CiAgICAgICAgICAgIH0pLmNhdGNoKGVycm9yID0+IHsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfSwKICAgICAgICBoYW5kbGVTdWNjZXNzKHtyZXN1bHRzLCBoZWFkZXJ9KSB7CiAgICAgICAgICAgIHVwbG9hZEV4Y2VsKHJlc3VsdHMpLnRoZW4ocmVzID0+IHsKICAgICAgICAgICAgICAgIHRoaXMuaHR0cEdldFRhYmxlRGF0YSgxKTsKICAgICAgICAgICAgfSkuY2F0Y2goZXJyb3IgPT4gewogICAgICAgICAgICAgICAgdGhpcy50YWJsZURhdGEgPSByZXN1bHRzOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgY29uc29sZS5sb2cocmVzdWx0cyk7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKGhlYWRlcik7CiAgICAgICAgICAgIC8vIHRoaXMudGFibGVIZWFkZXIgPSBoZWFkZXIKICAgICAgICB9LAogICAgICAgIGNsb3NlRGlhbG9nKCkgey8v5b2TZGlhbG9n5YWz6Zet5pe255qE5pON5L2c77ya6YeN5paw5ouJ5Y+W5b2T5YmN55qE5pWw5o2u6aG177yI5pyJ6K+35rGC77yJCiAgICAgICAgICAgIHRoaXMuZGF0YUZvcm0gPSB7CiAgICAgICAgICAgICAgICBpZDonJywKICAgICAgICAgICAgICAgIGVxcElkOiAnJywKICAgICAgICAgICAgICAgIG1vZHVsZUlkOiAnJywKICAgICAgICAgICAgICAgIGVxcFR5cGVJZDogJycsCiAgICAgICAgICAgICAgICBob3NwaXRhbElkOiAnJywKICAgICAgICAgICAgICAgIGRvY3Rvck5hbWU6ICcnLAogICAgICAgICAgICAgICAgcGF0aWVudE5hbWU6ICcnLAogICAgICAgICAgICB9OwogICAgICAgICAgICB0aGlzLmlzRWRpdCA9IGZhbHNlOwogICAgICAgICAgICB0aGlzLmRpYWxvZ0Zvcm1WaXNpYmxlID0gZmFsc2U7CiAgICAgICAgICAgIHRoaXMuaHR0cEdldFRhYmxlRGF0YSh0aGlzLmN1cnJlbnRQYWdlKTsKICAgICAgICB9LAogICAgICAgIGhhbmRsZUVkaXQoaW5kZXgsIHJvdykgey8v57yW6L6R6K6+5aSHCiAgICAgICAgICAgIHRoaXMuZGlhbG9nRm9ybVZpc2libGUgPSB0cnVlOwogICAgICAgICAgICB0aGlzLmRhdGFGb3JtLmVxcElkID0gcm93LmVxcElkOwogICAgICAgICAgICB0aGlzLmRhdGFGb3JtLmlkID0gcm93LmVxcElkOwogICAgICAgICAgICAvLyB0aGlzLmRhdGFGb3JtLmVxdWlwbWVudElEID0gcm93LmVxdWlwbWVudElEOwogICAgICAgICAgICB0aGlzLmRhdGFGb3JtLmVxcFR5cGVJZCA9IHJvdy5lcXBUeXBlSWQ7CiAgICAgICAgICAgIHRoaXMuZGF0YUZvcm0uaG9zcGl0YWxJZCA9IHJvdy5ob3NwaXRhbElkOwogICAgICAgICAgICB0aGlzLmRhdGFGb3JtLmRvY3Rvck5hbWUgPSByb3cuZG9jdG9yTmFtZTsKICAgICAgICAgICAgdGhpcy5kYXRhRm9ybS5wYXRpZW50TmFtZSA9IHJvdy5wYXRpZW50TmFtZTsKICAgICAgICAgICAgdGhpcy5kYXRhRm9ybS5tb2R1bGVJZCA9IHJvdy5tb2R1bGVJZDsKICAgICAgICAgICAgdGhpcy5pc0VkaXQgPSB0cnVlOwogICAgICAgIH0sCiAgICAgICAgY29uZmlybUNoYW5nZSgpIHsgIC8v56Gu5a6a5L+u5pS577yI5paw5aKe77yJ6K6+5aSH5L+h5oGv77yI5pyJ6K+35rGC77yJCiAgICAgICAgICAgIGlmICh0aGlzLmlzRWRpdCkgewogICAgICAgICAgICAgICAgZWRpdEVxdWlwbWVudCh0aGlzLmRhdGFGb3JtLCAxKS50aGVuKHJlcyA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGlhbG9nRm9ybVZpc2libGUgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5odHRwR2V0VGFibGVEYXRhKHRoaXMuY3VycmVudFBhZ2UpOwogICAgICAgICAgICAgICAgfSkuY2F0Y2goZXJyb3IgPT4gewogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yLnN0YXR1cyk7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGFkZEVxdWlwbWVudCh0aGlzLmRhdGFGb3JtLCAxKS50aGVuKHJlcyA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGlhbG9nRm9ybVZpc2libGUgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5odHRwR2V0VGFibGVEYXRhKDEpOwogICAgICAgICAgICAgICAgfSkuY2F0Y2goZXJyb3IgPT4gewogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yLnN0YXR1cyk7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgaGFuZGxlRGVsZXRlKGluZGV4LCByb3cpIHsvL+WIoOmZpOiuvuWkh++8iOacieivt+axgu+8iQogICAgICAgICAgICBkZWxldGVEZXZpY2Uocm93LmlkKS50aGVuKHJlcyA9PiB7CiAgICAgICAgICAgICAgICB0aGlzLmh0dHBHZXRUYWJsZURhdGEodGhpcy5jdXJyZW50UGFnZSk7CiAgICAgICAgICAgIH0pLmNhdGNoKGVycm9yID0+IHsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yLnN0YXR1cyk7CiAgICAgICAgICAgIH0pOwogICAgICAgIH0sCiAgICAgICAgaGFuZGxlQWRkKCkgeyAvL+aWsOWinuiuvuWkhwogICAgICAgICAgICB0aGlzLmRpYWxvZ0Zvcm1WaXNpYmxlID0gdHJ1ZTsKICAgICAgICB9LAogICAgICAgIGhhbmRsZUV4cG9ydCgpewoKICAgICAgICB9CiAgICB9LAogICAgY3JlYXRlZCgpIHsKICAgICAgICB0aGlzLmh0dHBHZXRUYWJsZURhdGEoMSk7CiAgICB9LAp9Cg=="},{"version":3,"sources":["deviceInfo.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqFA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA","file":"deviceInfo.vue","sourceRoot":"src/views/device/deviceInfo","sourcesContent":["<template>\n    <div class=\"device\">\n        <upload-excel :on-success=\"handleSuccess\"/>\n\n        <!--        <export-table :table=\"table\" :is-button-handle=\"true\"-->\n        <!--                      :handleEditCallback=\"handleEdit\"-->\n        <!--                      :handleDeleteCallback=\"handleDelete\"-->\n        <!--                      :closeDialog=\"closeDialog\"-->\n        <!--                      :confirm=\"confirmChange\"-->\n        <!--                      :handleAddCallback=\"handleAdd\"-->\n        <!--                      :rules=\"rules\"-->\n        <!--        ></export-table>-->\n        <div class=\"head\" style=\"width: 100%;background: none;height: 60px;box-sizing: border-box;padding: 20px\">\n            <div style=\"font-size: 24px;\">设备信息</div>\n            <div class=\"button-handle\">\n                <el-button type=\"primary\" size=\"large\" @click=\"handleAdd()\">\n                    <i class=\"el-icon-edit\"/><span>添加</span>\n                </el-button>\n                <el-button type=\"primary\" size=\"large\" disabled @click=\"handleExport()\"><i\n                        class=\"el-icon-download\"/><span>导出</span></el-button>\n            </div>\n        </div>\n        <div class=\"table\">\n            <el-table :data=\"table\">\n                <el-table-column v-for=\"item in tableHead\" :key=\"item.index\" :label=\"item.label\"\n                                 :prop=\"item.prop\"></el-table-column>\n                <el-table-column label=\"操作\">\n                    <template slot-scope=\"scope\">\n                        <el-button\n                                size=\"mini\"\n                                @click=\"handleEdit(scope.$index, scope.row)\">编辑\n                        </el-button>\n                        <el-button\n                                size=\"mini\"\n                                type=\"danger\"\n                                @click=\"handleDelete(scope.$index, scope.row)\">删除\n                        </el-button>\n                    </template>\n                </el-table-column>\n            </el-table>\n            <el-dialog :title=\"isEdit?'修改信息':'添加设备'\" :visible.sync=\"dialogFormVisible\" @close=\"closeDialog\" width=\"40%\">\n                <el-form :model=\"dataForm\" label-width=\"100px\" status-icon :rules=\"rules\">\n                    <el-form-item label=\"设备ID\" prop=\"id\">\n                        <el-input v-model=\"dataForm.id\"/>\n                    </el-form-item>\n                    <el-form-item label=\"设备编号\" prop=\"eqpId\">\n                        <el-input v-model=\"dataForm.eqpId\"/>\n                    </el-form-item>\n                    <el-form-item label=\"模块识别码\" prop=\"moduleId\">\n                        <el-input v-model.number=\"dataForm.moduleId\"/>\n                    </el-form-item>\n                    <el-form-item label=\"设备型号\" prop=\"eqpTypeId\">\n                        <el-input v-model=\"dataForm.eqpTypeId\"/>\n                    </el-form-item>\n                    <el-form-item label=\"所属医院\" prop=\"hospitalId\">\n                        <el-input v-model=\"dataForm.hospitalId\"/>\n                    </el-form-item>\n                    <el-form-item label=\"所属医生\" prop=\"doctorName\">\n                        <el-input v-model=\"dataForm.doctorName\"/>\n                    </el-form-item>\n                    <el-form-item label=\"现使用人\" prop=\"patientName\">\n                        <el-input v-model=\"dataForm.patientName\"/>\n                    </el-form-item>\n                </el-form>\n                <div slot=\"footer\" class=\"dialog-footer\">\n                    <el-button @click=\"dialogFormVisible=false\">取 消</el-button>\n                    <el-button type=\"primary\" @click=\"confirmChange()\">确 定</el-button>\n                </div>\n            </el-dialog>\n\n            <div class=\"news-footer float-left\">\n                <el-pagination :background=\"true\" :total=\"totalNumber\"\n                               layout=\"total, prev, pager, next, jumper\"\n                               :prev-text=\"'上一页'\"\n                               :next-text=\"'下一页'\"\n                               :page-size=\"2\"\n                               @current-change=\"handleCurrentChange\"\n                >\n                </el-pagination>\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\n    // import getEquipmentInformation from \"@/mock/getEquipmentInformation\"; //mock数据\n    import UploadExcel from \"../../../components/uploadExcel/uploadExcel\";\n    import {getDeviceInfo, deleteDevice, addEquipment, editEquipment, uploadExcel} from \"../../../api/device\";\n    import ExportTable from \"../../../components/exportTable/exportTable\";\n\n    export default {\n        name: \"device\",\n        components: {UploadExcel},\n        data() {\n            return {\n                table: [],\n                tableHead:[\n                    {index: 0,label:'模块识别码',prop:'moduleId'},\n                    {index: 1,label:'设备编号',prop:'eqpId'},\n                    {index: 2,label:'设备类型',prop:'eqpTypeId'},\n                    {index: 4,label:'当前状态',prop:'nowStatus'},\n                    {index: 5,label:'当前患者',prop:'patientName'},\n                    {index: 6,label:'负责医师',prop:'doctorName'},\n                    {index: 7,label:'所属医院',prop:'hospitalId'},\n                ],\n                currentPage: 1,\n                totalNumber: 0,\n                dialogFormVisible: false,\n                dataForm: {},\n                rules: {},\n                isEdit: false,\n            }\n        },\n        methods: {\n            handleCurrentChange(page) {//操作页码改变\n                this.httpGetTableData(page);\n                this.currentPage = page;\n            },\n            httpGetTableData(page) {//拉取当前页设备数据（有请求）\n                getDeviceInfo(page).then(res => {\n                    console.log(res.data)\n                    this.table = res.data.list;\n                    this.totalNumber = res.data.total;\n                }).catch(error => {\n                    console.log(error);\n                });\n            },\n            handleSuccess({results, header}) {\n                uploadExcel(results).then(res => {\n                    this.httpGetTableData(1);\n                }).catch(error => {\n                    this.tableData = results;\n                });\n                console.log(results);\n                console.log(header);\n                // this.tableHeader = header\n            },\n            closeDialog() {//当dialog关闭时的操作：重新拉取当前的数据页（有请求）\n                this.dataForm = {\n                    id:'',\n                    eqpId: '',\n                    moduleId: '',\n                    eqpTypeId: '',\n                    hospitalId: '',\n                    doctorName: '',\n                    patientName: '',\n                };\n                this.isEdit = false;\n                this.dialogFormVisible = false;\n                this.httpGetTableData(this.currentPage);\n            },\n            handleEdit(index, row) {//编辑设备\n                this.dialogFormVisible = true;\n                this.dataForm.eqpId = row.eqpId;\n                this.dataForm.id = row.eqpId;\n                // this.dataForm.equipmentID = row.equipmentID;\n                this.dataForm.eqpTypeId = row.eqpTypeId;\n                this.dataForm.hospitalId = row.hospitalId;\n                this.dataForm.doctorName = row.doctorName;\n                this.dataForm.patientName = row.patientName;\n                this.dataForm.moduleId = row.moduleId;\n                this.isEdit = true;\n            },\n            confirmChange() {  //确定修改（新增）设备信息（有请求）\n                if (this.isEdit) {\n                    editEquipment(this.dataForm, 1).then(res => {\n                            this.dialogFormVisible = false;\n                            this.httpGetTableData(this.currentPage);\n                    }).catch(error => {\n                        console.log(error.status);\n                    });\n                } else {\n                    addEquipment(this.dataForm, 1).then(res => {\n                            this.dialogFormVisible = false;\n                            this.httpGetTableData(1);\n                    }).catch(error => {\n                        console.log(error.status);\n                    });\n                }\n            },\n            handleDelete(index, row) {//删除设备（有请求）\n                deleteDevice(row.id).then(res => {\n                    this.httpGetTableData(this.currentPage);\n                }).catch(error => {\n                    console.log(error.status);\n                });\n            },\n            handleAdd() { //新增设备\n                this.dialogFormVisible = true;\n            },\n            handleExport(){\n\n            }\n        },\n        created() {\n            this.httpGetTableData(1);\n        },\n    }\n</script>\n\n<style scoped lang=\"scss\">\n    .device {\n        .head {\n            display: flex;\n            flex-direction: row;\n            justify-content: space-between;\n            align-items: center;\n        }\n        .news-footer {\n            text-align: center;\n            margin-top: 20px;\n        }\n\n        .el-table {\n            .el-button {\n                margin: 1px;\n            }\n        }\n\n    }\n</style>\n"]}]}