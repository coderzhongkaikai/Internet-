{"remainingRequest":"/Users/zkk/code/program/admin-system/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/zkk/code/program/admin-system/src/views/device/deviceInfo/deviceInfo.vue?vue&type=style&index=0&id=50716e10&scoped=true&lang=scss&","dependencies":[{"path":"/Users/zkk/code/program/admin-system/src/views/device/deviceInfo/deviceInfo.vue","mtime":1595234944615},{"path":"/Users/zkk/code/program/admin-system/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zkk/code/program/admin-system/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/zkk/code/program/admin-system/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/zkk/code/program/admin-system/node_modules/sass-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zkk/code/program/admin-system/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zkk/code/program/admin-system/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgouZGV2aWNlIHsKICAgIC5oZWFkIHsKICAgICAgICBkaXNwbGF5OiBmbGV4OwogICAgICAgIGZsZXgtZGlyZWN0aW9uOiByb3c7CiAgICAgICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuOwogICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgICB9CiAgICAubmV3cy1mb290ZXIgewogICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjsKICAgICAgICBtYXJnaW4tdG9wOiAyMHB4OwogICAgfQoKICAgIC5lbC10YWJsZSB7CiAgICAgICAgLmVsLWJ1dHRvbiB7CiAgICAgICAgICAgIG1hcmdpbjogMXB4OwogICAgICAgIH0KICAgIH0KCn0K"},{"version":3,"sources":["deviceInfo.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2MA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA","file":"deviceInfo.vue","sourceRoot":"src/views/device/deviceInfo","sourcesContent":["<template>\n    <div class=\"device\">\n        <upload-excel :on-success=\"handleSuccess\"/>\n\n        <!--        <export-table :table=\"table\" :is-button-handle=\"true\"-->\n        <!--                      :handleEditCallback=\"handleEdit\"-->\n        <!--                      :handleDeleteCallback=\"handleDelete\"-->\n        <!--                      :closeDialog=\"closeDialog\"-->\n        <!--                      :confirm=\"confirmChange\"-->\n        <!--                      :handleAddCallback=\"handleAdd\"-->\n        <!--                      :rules=\"rules\"-->\n        <!--        ></export-table>-->\n        <div class=\"head\" style=\"width: 100%;background: none;height: 60px;box-sizing: border-box;padding: 20px\">\n            <div style=\"font-size: 24px;\">设备信息</div>\n            <div class=\"button-handle\">\n                <el-button type=\"primary\" size=\"large\" @click=\"handleAdd()\">\n                    <i class=\"el-icon-edit\"/><span>添加</span>\n                </el-button>\n                <el-button type=\"primary\" size=\"large\" disabled @click=\"handleExport()\"><i\n                        class=\"el-icon-download\"/><span>导出</span></el-button>\n            </div>\n        </div>\n        <div class=\"table\">\n            <el-table :data=\"table\">\n                <el-table-column v-for=\"item in tableHead\" :key=\"item.index\" :label=\"item.label\"\n                                 :prop=\"item.prop\"></el-table-column>\n                <el-table-column label=\"操作\">\n                    <template slot-scope=\"scope\">\n                        <el-button\n                                size=\"mini\"\n                                @click=\"handleEdit(scope.$index, scope.row)\">编辑\n                        </el-button>\n                        <el-button\n                                size=\"mini\"\n                                type=\"danger\"\n                                @click=\"handleDelete(scope.$index, scope.row)\">删除\n                        </el-button>\n                    </template>\n                </el-table-column>\n            </el-table>\n            <el-dialog :title=\"isEdit?'修改信息':'添加设备'\" :visible.sync=\"dialogFormVisible\" @close=\"closeDialog\" width=\"40%\">\n                <el-form :model=\"dataForm\" label-width=\"100px\" status-icon :rules=\"rules\">\n                    <el-form-item label=\"设备ID\" prop=\"id\">\n                        <el-input v-model=\"dataForm.id\"/>\n                    </el-form-item>\n                    <el-form-item label=\"设备编号\" prop=\"eqpId\">\n                        <el-input v-model=\"dataForm.eqpId\"/>\n                    </el-form-item>\n                    <el-form-item label=\"模块识别码\" prop=\"moduleId\">\n                        <el-input v-model.number=\"dataForm.moduleId\"/>\n                    </el-form-item>\n                    <el-form-item label=\"设备型号\" prop=\"eqpTypeId\">\n                        <el-input v-model=\"dataForm.eqpTypeId\"/>\n                    </el-form-item>\n                    <el-form-item label=\"所属医院\" prop=\"hospitalId\">\n                        <el-input v-model=\"dataForm.hospitalId\"/>\n                    </el-form-item>\n                    <el-form-item label=\"所属医生\" prop=\"doctorName\">\n                        <el-input v-model=\"dataForm.doctorName\"/>\n                    </el-form-item>\n                    <el-form-item label=\"现使用人\" prop=\"patientName\">\n                        <el-input v-model=\"dataForm.patientName\"/>\n                    </el-form-item>\n                </el-form>\n                <div slot=\"footer\" class=\"dialog-footer\">\n                    <el-button @click=\"dialogFormVisible=false\">取 消</el-button>\n                    <el-button type=\"primary\" @click=\"confirmChange()\">确 定</el-button>\n                </div>\n            </el-dialog>\n\n            <div class=\"news-footer float-left\">\n                <el-pagination :background=\"true\" :total=\"totalNumber\"\n                               layout=\"total, prev, pager, next, jumper\"\n                               :prev-text=\"'上一页'\"\n                               :next-text=\"'下一页'\"\n                               :page-size=\"2\"\n                               @current-change=\"handleCurrentChange\"\n                >\n                </el-pagination>\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\n    // import getEquipmentInformation from \"@/mock/getEquipmentInformation\"; //mock数据\n    import UploadExcel from \"../../../components/uploadExcel/uploadExcel\";\n    import {getDeviceInfo, deleteDevice, addEquipment, editEquipment, uploadExcel} from \"../../../api/device\";\n    import ExportTable from \"../../../components/exportTable/exportTable\";\n    import {findAll,add,Delete,update} from \"../../../api/infomation\"\n\n    export default {\n        name: \"device\",\n        components: {UploadExcel},\n        data() {\n            return {\n                table: [],\n                tableHead:[\n                    {index: 0,label:'模块识别码',prop:'moduleId'},\n                    {index: 1,label:'设备编号',prop:'eqpId'},\n                    {index: 2,label:'设备类型',prop:'eqpTypeId'},\n                    {index: 4,label:'当前状态',prop:'nowStatus'},\n                    {index: 5,label:'当前患者',prop:'patientName'},\n                    {index: 6,label:'负责医师',prop:'doctorName'},\n                    {index: 7,label:'所属医院',prop:'hospitalId'},\n                ],\n                currentPage: 1,\n                totalNumber: 0,\n                dialogFormVisible: false,\n                dataForm: {},\n                rules: {},\n                isEdit: false,\n            }\n        },\n        methods: {\n            handleCurrentChange(page) {//操作页码改变\n                this.httpGetTableData(page);\n                this.currentPage = page;\n            },\n            httpGetTableData(page) {//拉取当前页设备数据（有请求）\n                findAll(page).then(res => {\n                    console.log(res.data)\n                    this.table = res.data.list;\n                    this.totalNumber = res.data.total;\n                }).catch(error => {\n                    console.log(error);\n                });\n            },\n            handleSuccess({results, header}) {\n                uploadExcel(results).then(res => {\n                    this.httpGetTableData(1);\n                }).catch(error => {\n                    this.tableData = results;\n                });\n                console.log(results);\n                console.log(header);\n                // this.tableHeader = header\n            },\n            closeDialog() {//当dialog关闭时的操作：重新拉取当前的数据页（有请求）\n                this.dataForm = {\n                    id:'',\n                    eqpId: '',\n                    moduleId: '',\n                    eqpTypeId: '',\n                    hospitalId: '',\n                    doctorName: '',\n                    patientName: '',\n                };\n                this.isEdit = false;\n                this.dialogFormVisible = false;\n                this.httpGetTableData(this.currentPage);\n            },\n            handleEdit(index, row) {//编辑设备\n                this.dialogFormVisible = true;\n                this.dataForm.eqpId = row.eqpId;\n                this.dataForm.id = row.eqpId;\n                // this.dataForm.equipmentID = row.equipmentID;\n                this.dataForm.eqpTypeId = row.eqpTypeId;\n                this.dataForm.hospitalId = row.hospitalId;\n                this.dataForm.doctorName = row.doctorName;\n                this.dataForm.patientName = row.patientName;\n                this.dataForm.moduleId = row.moduleId;\n                this.isEdit = true;\n            },\n            confirmChange() {  //确定修改（新增）设备信息（有请求）\n           // +++++++++++++++++++++++++++++++\n                if (this.isEdit) {\n                    editEquipment(this.dataForm).then(res => {\n                            this.dialogFormVisible = false;\n                            this.httpGetTableData(this.currentPage);\n                    }).catch(error => {\n                        console.log(error.status);\n                    });\n                } else {\n                    add(this.dataForm).then(res => {\n                            this.dialogFormVisible = false;\n                            this.httpGetTableData(1);\n                    }).catch(error => {\n                        console.log(error.status);\n                    });\n                }\n            },\n            handleDelete(index, row) {//删除设备（有请求）\n                Delete(row.id).then(res => {\n                    this.httpGetTableData(this.currentPage);\n                }).catch(error => {\n                    console.log(error.status);\n                });\n            },\n            handleAdd() { //新增设备\n                this.dialogFormVisible = true;\n            },\n            handleExport(){\n\n            }\n        },\n        created() {\n            this.httpGetTableData(1);\n        },\n    }\n</script>\n\n<style scoped lang=\"scss\">\n    .device {\n        .head {\n            display: flex;\n            flex-direction: row;\n            justify-content: space-between;\n            align-items: center;\n        }\n        .news-footer {\n            text-align: center;\n            margin-top: 20px;\n        }\n\n        .el-table {\n            .el-button {\n                margin: 1px;\n            }\n        }\n\n    }\n</style>\n"]}]}